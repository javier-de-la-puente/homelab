---
# OpenWRT Bootstrap Playbook (Stage 1)
#
# This playbook configures a fresh OpenWRT installation with:
#   - System hostname and timezone
#   - PPPoE WAN connection
#   - Management WiFi for backup access
#   - New management IP: 10.50.1.1
#
# Prerequisites:
#   - Fresh OpenWRT flashed to SD card
#   - Pi connected directly to laptop (eth0)
#   - Laptop configured with static IP 192.168.1.2/24
#   - SSH to root@192.168.1.1 works (no password)
#   - Root password set manually: passwd
#
# Usage:
#   ansible-playbook playbooks/openwrt-bootstrap.yml -i inventory/bootstrap/openwrt.yml
#
# After completion:
#   - Router will be at 10.50.1.1
#   - Connect via WiFi or switch to continue
#   - Run Stage 2: ansible-playbook playbooks/openwrt-full.yml -l router

- name: Bootstrap OpenWRT Router (Stage 1)
  hosts: openwrt
  gather_facts: false
  vars:
    openwrt_stage: bootstrap
  vars_files:
    - ../group_vars/openwrt/network.yml
    - ../group_vars/openwrt/secrets.sops.yml
  roles:
    - openwrt
