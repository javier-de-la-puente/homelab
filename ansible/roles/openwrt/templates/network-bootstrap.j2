# OpenWRT Network Configuration - Bootstrap Stage
# Minimal configuration for initial connectivity

config interface 'loopback'
	option device 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

# LAN interface - Management VLAN
config device
	option name 'br-lan'
	option type 'bridge'
	list ports '{{ lan_interface }}'

config interface 'lan'
	option device 'br-lan'
	option proto 'static'
	option ipaddr '10.50.1.1'
	option netmask '255.255.255.0'

# WAN interface - PPPoE over VLAN {{ wan_vlan_id }}
config device
	option name '{{ wan_interface }}.{{ wan_vlan_id }}'
	option type '8021q'
	option ifname '{{ wan_interface }}'
	option vid '{{ wan_vlan_id }}'
	option macaddr '{{ wan_macaddr }}'

config interface 'wan'
	option device '{{ wan_interface }}.{{ wan_vlan_id }}'
	option proto 'pppoe'
	option username '{{ pppoe_username }}'
	option password '{{ pppoe_password }}'
	option ipv6 'auto'
	option keepalive '5 5'

config interface 'wan6'
	option device '@wan'
	option proto 'dhcpv6'
	option reqaddress 'try'
	option reqprefix 'auto'
